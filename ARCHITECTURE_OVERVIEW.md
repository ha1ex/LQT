# Архитектурный обзор проекта Life Quality Tracker

## Общая концепция

Life Quality Tracker - это React-приложение для отслеживания и улучшения качества жизни через научно-обоснованный подход с использованием гипотез, экспериментов и ИИ-анализа.

## Ключевые принципы архитектуры

### 1. Модульная архитектура
- **Компонентная структура**: Каждая функциональность изолирована в отдельные компоненты
- **Разделение ответственности**: UI, логика, данные и состояние разделены
- **Переиспользование**: Максимальное переиспользование компонентов через props и варианты

### 2. Управление данными
- **Единый источник истины**: GlobalDataProvider управляет всеми данными приложения
- **Локальное хранение**: localStorage для персистентности данных
- **Реактивность**: Автоматическое обновление UI при изменении данных

### 3. Типизация и безопасность
- **TypeScript**: Полная типизация всех данных и API
- **Валидация**: Проверка данных на всех уровнях
- **Обработка ошибок**: Graceful degradation и fallback состояния

## Структура проекта

```
src/
├── components/           # Все компоненты приложения
│   ├── ai/              # ИИ-система
│   ├── dashboard/       # Дашборд и аналитика
│   ├── onboarding/      # Процесс знакомства
│   ├── rating/          # Система рейтингов
│   ├── strategy/        # Система стратегий и гипотез
│   ├── tracker/         # Трекинг метрик
│   └── ui/              # Базовые UI компоненты
├── contexts/            # React контексты
├── hooks/               # Кастомные хуки
├── pages/               # Страницы приложения
├── types/               # TypeScript типы
└── utils/               # Утилиты и хелперы
```

## Основные системы

### 1. Система управления состоянием
- **GlobalDataProvider**: Центральное управление данными
- **Локальные хуки**: Специализированные хуки для различных данных
- **React Query**: Кеширование и синхронизация данных

### 2. Система рейтингов
- **WeeklyRatings**: Еженедельные оценки качества жизни
- **Metrics**: Настраиваемые метрики для отслеживания
- **Analytics**: Анализ трендов и корреляций

### 3. Система стратегий
- **Hypotheses**: Научно-обоснованные гипотезы для улучшений
- **Experiments**: Отслеживание экспериментов
- **Progress Tracking**: Мониторинг прогресса выполнения

### 4. ИИ-система
- **AI Assistant**: Интеллектуальный помощник
- **Insights**: Автоматический анализ данных
- **Recommendations**: Персонализированные рекомендации

## Поток данных

```
User Input → Components → Hooks → GlobalDataProvider → localStorage
                ↓
            Real-time Updates → UI Re-render
                ↓
            AI Analysis → Insights → Recommendations
```

## Взаимодействие между системами

### 1. Рейтинги ↔ Стратегии
- Данные рейтингов используются для валидации гипотез
- Прогресс стратегий влияет на рекомендации по рейтингам

### 2. ИИ ↔ Все системы
- ИИ анализирует данные из всех систем
- Предоставляет инсайты и рекомендации для каждой системы

### 3. Dashboard ↔ Все данные
- Агрегирует информацию из всех систем
- Предоставляет единый обзор прогресса

## Ключевые файлы

### Точки входа
- `src/main.tsx` - Инициализация React приложения
- `src/App.tsx` - Корневой компонент с провайдерами
- `src/pages/Index.tsx` - Главная страница

### Управление данными
- `src/contexts/GlobalDataProvider.tsx` - Глобальное состояние
- `src/utils/dataAdapter.ts` - Адаптация данных между форматами
- `src/utils/demoData.ts` - Демо-данные для примеров

### Основные компоненты
- `src/components/LifeQualityTracker.tsx` - Главный компонент приложения
- `src/components/ui/` - Базовые UI компоненты (shadcn/ui)

## Технологический стек

### Основные технологии
- **React 18** - UI библиотека
- **TypeScript** - Типизация
- **Vite** - Сборщик и dev сервер
- **Tailwind CSS** - Стилизация

### UI и компоненты
- **shadcn/ui** - Компонентная библиотека
- **Radix UI** - Примитивы для доступности
- **Lucide React** - Иконки

### Управление состоянием
- **React Context** - Глобальное состояние
- **React Query** - Серверное состояние
- **localStorage** - Персистентность

### Дополнительные библиотеки
- **date-fns** - Работа с датами
- **recharts** - Графики и аналитика
- **react-hook-form** - Формы
- **zod** - Валидация схем

## Принципы разработки

### 1. Component-First
- Каждая функциональность - отдельный компонент
- Компоненты максимально переиспользуемы
- Props для конфигурации, не hardcode

### 2. Type-Safe
- Все данные типизированы
- Интерфейсы для всех API
- Валидация на границах

### 3. Performance-First
- Lazy loading компонентов
- Мемоизация вычислений
- Виртуализация длинных списков

### 4. Accessibility-First
- ARIA атрибуты
- Keyboard navigation
- Screen reader support

## Расширяемость

### Добавление новых метрик
1. Обновить типы в `src/types/`
2. Добавить в `BASE_METRICS`
3. Обновить адаптеры данных

### Добавление новых ИИ функций
1. Расширить `src/types/ai.ts`
2. Добавить компоненты в `src/components/ai/`
3. Интегрировать в `AIFloatingAssistant`

### Добавление новых страниц
1. Создать компонент в `src/pages/`
2. Добавить роут в `src/App.tsx`
3. Обновить навигацию

## Развертывание и сборка

### Development
```bash
npm run dev    # Запуск dev сервера
npm run build  # Сборка production
npm run preview # Превью production сборки
```

### Production
- Автоматическая сборка через Vite
- Оптимизация bundle размера
- Tree shaking неиспользуемого кода